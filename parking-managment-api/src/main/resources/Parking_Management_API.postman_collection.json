{
	"info": {
		"_postman_id": "ec16ff0c-a73e-44e8-bfac-f86536acabda",
		"name": "Parking Management API",
		"description": "Complete API collection for Parking Management System with authentication scripts and all endpoints",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "25082324"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"{{firstName}}\",\n    \"lastName\": \"{{lastName}}\",\n    \"email\": \"{{email}}\",\n    \"password\": \"{{password}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/register?manager=false",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"register"
							],
							"query": [
								{
									"key": "manager",
									"value": "false",
									"description": "Set to true to register as manager"
								}
							]
						},
						"description": "Register a new user account"
					},
					"response": []
				},
				{
					"name": "Register Manager",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"{{managerFirstName}}\",\n    \"lastName\": \"{{managerLastName}}\",\n    \"email\": \"{{managerEmail}}\",\n    \"password\": \"{{managerPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/register?manager=true",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"register"
							],
							"query": [
								{
									"key": "manager",
									"value": "true",
									"description": "Register as manager"
								}
							]
						},
						"description": "Register a new manager account"
					},
					"response": []
				},
				{
					"name": "Register Admin",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"{{adminFirstName}}\",\n    \"lastName\": \"{{adminLastName}}\",\n    \"email\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/register?manager=true",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"register"
							],
							"query": [
								{
									"key": "manager",
									"value": "true",
									"description": "Register as manager (admin role)"
								}
							]
						},
						"description": "Register a new admin account"
					},
					"response": []
				},
				{
					"name": "Login User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.success && response.data) {",
									"        pm.environment.set('accessToken', response.data.accessToken);",
									"        pm.environment.set('refreshToken', response.data.refreshToken);",
									"        pm.environment.set('tokenType', response.data.tokenType || 'Bearer');",
									"        pm.environment.set('currentUser', 'user');",
									"        console.log('User login successful');",
									"        console.log('Access Token:', response.data.accessToken);",
									"        console.log('Refresh Token:', response.data.refreshToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{email}}\",\n    \"password\": \"{{password}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Login with regular user credentials to get access token and refresh token"
					},
					"response": []
				},
				{
					"name": "Login Manager",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.success && response.data) {",
									"        pm.environment.set('accessToken', response.data.accessToken);",
									"        pm.environment.set('refreshToken', response.data.refreshToken);",
									"        pm.environment.set('tokenType', response.data.tokenType || 'Bearer');",
									"        pm.environment.set('currentUser', 'manager');",
									"        console.log('Manager login successful');",
									"        console.log('Access Token:', response.data.accessToken);",
									"        console.log('Refresh Token:', response.data.refreshToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{managerEmail}}\",\n    \"password\": \"{{managerPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Login with manager credentials to get access token and refresh token"
					},
					"response": []
				},
				{
					"name": "Login Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.success && response.data) {",
									"        pm.environment.set('accessToken', response.data.accessToken);",
									"        pm.environment.set('refreshToken', response.data.refreshToken);",
									"        pm.environment.set('tokenType', response.data.tokenType || 'Bearer');",
									"        pm.environment.set('currentUser', 'admin');",
									"        console.log('Admin login successful');",
									"        console.log('Access Token:', response.data.accessToken);",
									"        console.log('Refresh Token:', response.data.refreshToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{adminEmail}}\",\n    \"password\": \"{{adminPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Login with admin credentials to get access token and refresh token"
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.success && response.data) {",
									"        pm.environment.set('accessToken', response.data.accessToken);",
									"        pm.environment.set('refreshToken', response.data.refreshToken);",
									"        console.log('Token refreshed successfully');",
									"        console.log('New Access Token:', response.data.accessToken);",
									"        console.log('New Refresh Token:', response.data.refreshToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refreshToken\": \"{{refreshToken}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/refresh",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"refresh"
							]
						},
						"description": "Refresh access token using refresh token"
					},
					"response": []
				},
				{
					"name": "Logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    pm.environment.set('accessToken', '');",
									"    pm.environment.set('refreshToken', '');",
									"    console.log('Logout successful - tokens cleared');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refreshToken\": \"{{refreshToken}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/logout",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"logout"
							]
						},
						"description": "Logout and invalidate refresh token"
					},
					"response": []
				},
				{
					"name": "Request Password Recovery",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.success && response.data && response.data.token) {",
									"        pm.environment.set('recoveryToken', response.data.token);",
									"        console.log('Password recovery token received:', response.data.token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{recoveryEmail}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/password-recovery/request",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"password-recovery",
								"request"
							]
						},
						"description": "Request password recovery for an email address"
					},
					"response": []
				},
				{
					"name": "Verify Recovery Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"{{recoveryToken}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/password-recovery/verify",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"password-recovery",
								"verify"
							]
						},
						"description": "Verify if a recovery token is valid"
					},
					"response": []
				},
				{
					"name": "Reset Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"{{recoveryToken}}\",\n    \"newPassword\": \"{{newPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/password-recovery/reset",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"password-recovery",
								"reset"
							]
						},
						"description": "Reset password using recovery token"
					},
					"response": []
				}
			],
			"description": "Authentication endpoints for login, register, token refresh, and logout"
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Create User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{newUserEmail}}\",\n    \"password\": \"{{newUserPassword}}\",\n    \"firstName\": \"{{newUserFirstName}}\",\n    \"lastName\": \"{{newUserLastName}}\",\n    \"imageUrl\": \"{{newUserImageUrl}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users"
							]
						},
						"description": "Create a new user (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Get All Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/users",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users"
							]
						},
						"description": "Get all users (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Get User by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}"
							]
						},
						"description": "Get user by ID (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Update User",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"{{updatedFirstName}}\",\n    \"lastName\": \"{{updatedLastName}}\",\n    \"imageUrl\": \"{{updatedImageUrl}}\",\n    \"userDetail\": {\n        \"phone\": \"{{updatedPhone}}\",\n        \"address\": \"{{updatedAddress}}\"\n    }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}"
							]
						},
						"description": "Update user information (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Delete User",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}"
							]
						},
						"description": "Delete user by ID (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Search Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/users/search?q={{searchQuery}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"search"
							],
							"query": [
								{
									"key": "q",
									"value": "{{searchQuery}}",
									"description": "Search query string"
								}
							]
						},
						"description": "Search users by query string (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Get User by Email",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/users/email/{{email}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"email",
								"{{email}}"
							]
						},
						"description": "Get user by email (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Get Current User (Me)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/users/me",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"me"
							]
						},
						"description": "Get current authenticated user information (requires authentication)"
					},
					"response": []
				}
			],
			"description": "User management endpoints (CRUD operations and search)"
		},
		{
			"name": "Vehicles",
			"item": [
				{
					"name": "Create Vehicle",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"licensePlate\": \"ABC234\",\n    \"type\": \"{{vehicleType}}\",\n    \"brand\": \"{{vehicleBrand}}\",\n    \"model\": \"{{vehicleModel}}\",\n    \"color\": \"{{vehicleColor}}\",\n    \"userId\": 9\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/vehicles",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"vehicles"
							]
						},
						"description": "Create a new vehicle (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Get All Vehicles",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/vehicles",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"vehicles"
							]
						},
						"description": "Get all vehicles (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Get Vehicle by License Plate",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/vehicles/{{vehicleLicensePlate}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"vehicles",
								"{{vehicleLicensePlate}}"
							]
						},
						"description": "Get vehicle by license plate (requires authentication and ownership)"
					},
					"response": []
				},
				{
					"name": "Update Vehicle",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"licensePlate\": \"{{updatedVehicleLicensePlate}}\",\n    \"vehicleType\": \"{{updatedVehicleType}}\",\n    \"brand\": \"{{updatedVehicleBrand}}\",\n    \"model\": \"{{updatedVehicleModel}}\",\n    \"color\": \"{{updatedVehicleColor}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/vehicles/{{vehicleLicensePlate}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"vehicles",
								"{{vehicleLicensePlate}}"
							]
						},
						"description": "Update vehicle information (requires authentication and ownership)"
					},
					"response": []
				},
				{
					"name": "Delete Vehicle",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/vehicles/{{vehicleLicensePlate}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"vehicles",
								"{{vehicleLicensePlate}}"
							]
						},
						"description": "Delete vehicle by license plate (requires authentication and ownership)"
					},
					"response": []
				}
			],
			"description": "Vehicle management endpoints (CRUD operations)"
		},
		{
			"name": "Parking Lots",
			"item": [
				{
					"name": "Create Parking Lot",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"{{parkingLotName}}\",\n    \"address\": \"{{parkingLotAddress}}\",\n    \"imageUrl\": \"{{parkingLotImageUrl}}\",\n    \"managerId\": {{managerId}},\n    \"latitude\": 32.11,\n    \"longitude\": -12.33,\n    \"spots\": [\n        {\n            \"vehicleType\": \"{{spotVehicleType}}\",\n            \"floor\": {{spotFloor}},\n            \"code\": \"{{spotCode}}\",\n            \"isAvailable\": {{spotIsAvailable}}\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/parking-lots",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots"
							]
						},
						"description": "Create a new parking lot with spots (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Get All Parking Lots",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/parking-lots",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots"
							]
						},
						"description": "Get all parking lots (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Get Parking Lot by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/parking-lots/{{parkingLotId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"{{parkingLotId}}"
							]
						},
						"description": "Get parking lot by ID (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Update Parking Lot",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"{{updatedParkingLotName}}\",\n    \"address\": \"{{updatedParkingLotAddress}}\",\n    \"imageUrl\": \"{{updatedParkingLotImageUrl}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/parking-lots/{{parkingLotId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"{{parkingLotId}}"
							]
						},
						"description": "Update parking lot information (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Delete Parking Lot",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/parking-lots/{{parkingLotId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"{{parkingLotId}}"
							]
						},
						"description": "Delete parking lot by ID (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Get Parking Lots by User ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/parking-lots/user/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"user",
								"{{userId}}"
							]
						},
						"description": "Get all parking lots owned by a specific user ID (requires authentication)"
					},
					"response": []
				},
				{
					"name": "Get reservations walk in",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/parking-lots/1/reservations/walk-in",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"1",
								"reservations",
								"walk-in"
							],
							"query": [
								{
									"key": "from",
									"value": "{{reservationFrom}}",
									"disabled": true
								},
								{
									"key": "to",
									"value": "{{reservationTo}}",
									"disabled": true
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Reservations by Parking Lot",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/parking-lots/1/reservations?status=PENDING&page=0&size=5",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"1",
								"reservations"
							],
							"query": [
								{
									"key": "status",
									"value": "PENDING"
								},
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "5"
								},
								{
									"key": "from",
									"value": "{{reservationFrom}}",
									"disabled": true
								},
								{
									"key": "to",
									"value": "{{reservationTo}}",
									"disabled": true
								}
							]
						}
					},
					"response": []
				}
			],
			"description": "Parking lot management endpoints (CRUD operations)"
		},
		{
			"name": "Spots",
			"item": [
				{
					"name": "Create Spot",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('201 Created', function(){ pm.response.to.have.status(201); });",
									"if (pm.response.code === 201) {",
									"  const spot = pm.response.json();",
									"  pm.environment.set('spotId', spot.id);",
									"  console.log('Spot creado con ID:', spot.id);",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"parkingLotId\": {{parkingLotId}},\n  \"floor\": {{spotFloor}},\n  \"code\": \"{{spotCode}}\",\n  \"vehicleType\": \"{{spotVehicleType}}\",\n  \"reservationPriority\": false\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/parking-lots/4/spots",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"4",
								"spots"
							]
						},
						"description": "Crea un nuevo spot. vehicleType puede ser: bicicleta, auto, camioneta, moto"
					},
					"response": []
				},
				{
					"name": "Get Spot by ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('200 OK', function(){ pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/spots/{{spotId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"spots",
								"{{spotId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Spot",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('200 OK', function(){ pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"parkingLotId\": {{parkingLotId}},\n  \"floor\": {{updatedSpotFloor}},\n  \"code\": \"{{updatedSpotCode}}\",\n  \"vehicleType\": \"{{updatedSpotVehicleType}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/spots/{{spotId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"spots",
								"{{spotId}}"
							]
						},
						"description": "Actualiza datos de un spot."
					},
					"response": []
				},
				{
					"name": "Delete Spot",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('204 No Content', function(){ pm.response.to.have.status(204); });",
									"if (pm.response.code === 204) {",
									"  pm.environment.unset('spotId');",
									"  console.log('Spot eliminado y spotId borrado del entorno');",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/spots/{{spotId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"spots",
								"{{spotId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Spots (with filters + pagination)",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('200 OK', function(){ pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/parking-lots/{{parkingLotId}}/spots?available={{spotAvailable}}&vehicleType={{spotVehicleType}}&floor={{spotFloor}}&page={{page}}&size={{size}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"{{parkingLotId}}",
								"spots"
							],
							"query": [
								{
									"key": "available",
									"value": "{{spotAvailable}}"
								},
								{
									"key": "vehicleType",
									"value": "{{spotVehicleType}}"
								},
								{
									"key": "floor",
									"value": "{{spotFloor}}"
								},
								{
									"key": "page",
									"value": "{{page}}"
								},
								{
									"key": "size",
									"value": "{{size}}"
								}
							]
						},
						"description": "Lista spots de un parkingLot con filtros opcionales y paginaciÃ³n."
					},
					"response": []
				}
			]
		},
		{
			"name": "Prices",
			"item": [
				{
					"name": "Create price",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"vehicleType\" : \"auto\",\r\n    \"price\": 13.20,\r\n    \"validFrom\": \"2025-08-21 00:00:00\"\r\n\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/parking-lots/4/prices",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"4",
								"prices"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get prices by PerkingLot ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/parking-lots/{{parkingLotId}}/prices?min=10&max=300&vehicleType=auto",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"{{parkingLotId}}",
								"prices"
							],
							"query": [
								{
									"key": "min",
									"value": "10"
								},
								{
									"key": "max",
									"value": "300"
								},
								{
									"key": "vehicleType",
									"value": "auto"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update price by PerkingLot ID",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"vehicleType\" : \"auto\",\r\n    \"price\": 13.20,\r\n    \"validFrom\": \"2025-10-21 00:00:00\",\r\n    \"validTo\": \"2025-10-31 00:00:00\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/parking-lots/{{parkingLotId}}/prices",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"{{parkingLotId}}",
								"prices"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete price",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/parking-lots/{{parkingLotId}}/prices/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"parking-lots",
								"{{parkingLotId}}",
								"prices",
								"1"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Scheduled Reservations",
			"item": [
				{
					"name": "Create scheduled",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"userId\": 9,\r\n  \"spotId\": 1,\r\n  \"reservedStartTime\": \"2025-08-31 23:00:00\",\r\n  \"expectedEndTime\": \"2025-08-31 23:30:00\",\r\n  \"vehicleLicensePlate\": \"ABC234\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/reservations/scheduled",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reservations",
								"scheduled"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get reservations by User ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/reservations/scheduled?userId=9",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reservations",
								"scheduled"
							],
							"query": [
								{
									"key": "userId",
									"value": "9"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Reservation by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/reservations/scheduled/6",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reservations",
								"scheduled",
								"6"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update status reservation",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/reservations/scheduled/6/status",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reservations",
								"scheduled",
								"6",
								"status"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Walk in Stays",
			"item": [
				{
					"name": "Create walk in stay",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"spotId\": 1,\r\n    \"vehicleLicensePlate\": \"ABC123\",\r\n    \"expectedDurationHours\": 2\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/reservations/walk-in",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reservations",
								"walk-in"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get reservations by User ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/reservations/walk-in?userId=1&vehiclePlate=ABC123",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reservations",
								"walk-in"
							],
							"query": [
								{
									"key": "userId",
									"value": "1"
								},
								{
									"key": "vehiclePlate",
									"value": "ABC123"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get reservation by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/reservations/walk-in/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reservations",
								"walk-in",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get remaining-time",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/reservations/walk-in/1/remaining-time",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reservations",
								"walk-in",
								"1",
								"remaining-time"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update status",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/reservations/walk-in/1/status?status=COMPLETED",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reservations",
								"walk-in",
								"1",
								"status"
							],
							"query": [
								{
									"key": "status",
									"value": "COMPLETED"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update extend time",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{tokenType}} {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/reservations/walk-in/1/extend?extraHours=2",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"reservations",
								"walk-in",
								"1",
								"extend"
							],
							"query": [
								{
									"key": "extraHours",
									"value": "2"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"requests": {},
				"exec": [
					"// Auto-refresh token if expired",
					"const accessToken = pm.environment.get('accessToken');",
					"const refreshToken = pm.environment.get('refreshToken');",
					"",
					"if (accessToken && refreshToken) {",
					"    // Check if token is expired (JWT tokens expire in 5 minutes according to config)",
					"    try {",
					"        const tokenPayload = JSON.parse(atob(accessToken.split('.')[1]));",
					"        const currentTime = Math.floor(Date.now() / 1000);",
					"        ",
					"        if (tokenPayload.exp && currentTime >= tokenPayload.exp) {",
					"            console.log('Token expired, attempting to refresh...');",
					"            ",
					"            // Make a request to refresh the token",
					"            pm.sendRequest({",
					"                url: pm.environment.get('baseUrl') + '/auth/refresh',",
					"                method: 'POST',",
					"                header: {",
					"                    'Content-Type': 'application/json'",
					"                },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify({ refreshToken: refreshToken })",
					"                }",
					"            }, function (err, response) {",
					"                if (!err && response.code === 200) {",
					"                    const refreshResponse = response.json();",
					"                    if (refreshResponse.success && refreshResponse.data) {",
					"                        pm.environment.set('accessToken', refreshResponse.data.accessToken);",
					"                        pm.environment.set('refreshToken', refreshResponse.data.refreshToken);",
					"                        console.log('Token refreshed automatically');",
					"                    }",
					"                } else {",
					"                    console.log('Failed to refresh token, clearing tokens');",
					"                    pm.environment.set('accessToken', '');",
					"                    pm.environment.set('refreshToken', '');",
					"                }",
					"            });",
					"        }",
					"    } catch (e) {",
					"        console.log('Error parsing token:', e);",
					"    }",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8081/api"
		},
		{
			"key": "email",
			"value": "user@example.com"
		},
		{
			"key": "password",
			"value": "password123"
		},
		{
			"key": "firstName",
			"value": "John"
		},
		{
			"key": "lastName",
			"value": "Doe"
		},
		{
			"key": "managerFirstName",
			"value": "Manager"
		},
		{
			"key": "managerLastName",
			"value": "User"
		},
		{
			"key": "managerEmail",
			"value": "manager@example.com"
		},
		{
			"key": "managerPassword",
			"value": "password123"
		},
		{
			"key": "adminFirstName",
			"value": "Admin"
		},
		{
			"key": "adminLastName",
			"value": "User"
		},
		{
			"key": "adminEmail",
			"value": "admin@example.com"
		},
		{
			"key": "adminPassword",
			"value": "admin123"
		},
		{
			"key": "newUserEmail",
			"value": "newuser@example.com"
		},
		{
			"key": "newUserPassword",
			"value": "newuser123"
		},
		{
			"key": "newUserFirstName",
			"value": "New"
		},
		{
			"key": "newUserLastName",
			"value": "User"
		},
		{
			"key": "newUserImageUrl",
			"value": "https://example.com/avatar.jpg"
		},
		{
			"key": "userId",
			"value": "1"
		},
		{
			"key": "updatedFirstName",
			"value": "Updated"
		},
		{
			"key": "updatedLastName",
			"value": "Name"
		},
		{
			"key": "updatedImageUrl",
			"value": "https://example.com/updated-avatar.jpg"
		},
		{
			"key": "updatedPhone",
			"value": "+1234567890"
		},
		{
			"key": "updatedAddress",
			"value": "123 Updated Street, City, Country"
		},
		{
			"key": "searchQuery",
			"value": "john"
		},
		{
			"key": "parkingLotName",
			"value": "Central Parking"
		},
		{
			"key": "parkingLotAddress",
			"value": "123 Main Street, Downtown"
		},
		{
			"key": "parkingLotImageUrl",
			"value": "https://example.com/parking-lot.jpg"
		},
		{
			"key": "managerId",
			"value": "1"
		},
		{
			"key": "spotVehicleType",
			"value": "auto"
		},
		{
			"key": "spotFloor",
			"value": "1"
		},
		{
			"key": "spotCode",
			"value": "A1"
		},
		{
			"key": "spotIsAvailable",
			"value": "true"
		},
		{
			"key": "parkingLotId",
			"value": "1"
		},
		{
			"key": "updatedParkingLotName",
			"value": "Updated Central Parking"
		},
		{
			"key": "updatedParkingLotAddress",
			"value": "456 Updated Street, Downtown"
		},
		{
			"key": "updatedParkingLotImageUrl",
			"value": "https://example.com/updated-parking-lot.jpg"
		},
		{
			"key": "accessToken",
			"value": ""
		},
		{
			"key": "refreshToken",
			"value": ""
		},
		{
			"key": "tokenType",
			"value": "Bearer"
		},
		{
			"key": "recoveryEmail",
			"value": "user@example.com"
		},
		{
			"key": "recoveryToken",
			"value": ""
		},
		{
			"key": "newPassword",
			"value": "newSecurePassword123"
		},
		{
			"key": "currentUser",
			"value": ""
		},
		{
			"key": "vehicleLicensePlate",
			"value": "ABC123"
		},
		{
			"key": "vehicleType",
			"value": "auto"
		},
		{
			"key": "vehicleBrand",
			"value": "Toyota"
		},
		{
			"key": "vehicleModel",
			"value": "Camry"
		},
		{
			"key": "vehicleColor",
			"value": "Blue"
		},
		{
			"key": "updatedVehicleLicensePlate",
			"value": "XYZ789"
		},
		{
			"key": "updatedVehicleType",
			"value": "SUV"
		},
		{
			"key": "updatedVehicleBrand",
			"value": "Honda"
		},
		{
			"key": "updatedVehicleModel",
			"value": "CR-V"
		},
		{
			"key": "updatedVehicleColor",
			"value": "Red"
		},
		{
			"key": "status",
			"value": "CONFIRMED"
		},
		{
			"key": "reservationFrom",
			"value": ""
		},
		{
			"key": "reservationTo",
			"value": ""
		}
	]
}